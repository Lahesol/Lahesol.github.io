---
title: 주차장에 남은 자리 있나요?
author: Lahesol
date: 2022-01-07 14:28:30 +0900
categories: [Making, Parking_Lot_Detector]
tags: [Machine learing]
pin: false
---

------------------------------------

운전의 시작과 끝은 주차장에서 이루어진다.  

좋은 주차 자리를 차지하려는 것 또한 중요한 일 중 하나이지만 고정석이 아니고서야 늘 원하는 자리에 주차를 하기란 어려운 일이다.  

최근 근무를 시작한 이 건물의 주차장은 복층구조로 되어있는데 위 주차장은 면적이 좁아 자리가 잘 나지 않을 뿐더러 주차 공간을 확인하기 위해 진입하였다가 다시 후진하여 출차헤야 하는 경우가 다수 일어나고 있는 것을 알게 되었다.

소유하고 있던 라즈베리파이4와 웹캠을 이용하여 이러한 문제를 해결할 장치를 만들 수 있지 않을까 하여 본 프로젝트를 시작하게 되었다.

-------------------------

마침 유튜브에서 보게 된 [Parking Space Counter using OpenCV Python | Computer Vision](https://www.youtube.com/watch?v=caKnQlCMIYI)에서 OPENCV를 이용하여 이미지를 전처리한 후 구역 내 색상에 따라 차량의 유무를 감지하는 프로그램을 작성하였고 이 내용을 기반으로 실시간 주차 구역 감지기를 만들고자 하였다.

딘, 위 코드는 처리하고자 하는 영상이 수직방향에서 찍어 차량끼리 가리는 일이 없고 각 주차칸의 크기가 일정할 때 적용할 수 있다는 점에 들어 실제로 몇 장의 준비된 사진으로 동작시켜본 결과 

1. 앞 차량에 가려 뒷 차가 없더라도 자리가 없는 것으로 인식 됨
2. 멀리 있는 주차칸은 가까운 주차칸과 크기와 모양이 달라 정확도가 떨어짐
3. 검은 차는 노면과 같이 인식되어 차량의 존재를 감지하지 못 함
4. 건물에 의해 그림자가 지는 경우 노면의 명암이 뚜렷하게 구분되면서 차량으로 인식됨

위 네 가지 문제점으로 인해 만들고자 하는 목적에 맞지 않다는 결론을 내렸디.
(내용 추가 예정)

---------------

단순히 차량의 유무를 색상의 변화로 알아내지 않고 차량 자체를 검출하는 방식을 이용한다면 위 문제점 중 3번과 4번에 대한 해결이 가능할 것으로 예상되어 시도해보았다. TensorFlow Lite를 이욯해 주차장에 Car이 몇 대 있는지 알 수 있다면 각 구역내에 있는 것이 차인지 아닌지 구분한 후 주차장의 자리가 어떻게 되어있는지도 알 수 있을 것이다.

참고한 자료는 Digikey에서 운영하는 [maker.io](https://www.digikey.kr/en/maker)에 올라온 [How to Perform Object Detection with TensorFlow Lite on Raspberry Pi](https://www.digikey.kr/en/maker/projects/how-to-perform-object-detection-with-tensorflow-lite-on-raspberry-pi/b929e1519c7c43d5b2c6f89984883588)를 참고하였다.



#### *UPDATING . . .*
